ifeq ($(FREESTANDING_CFLAGS),)
    $(error FREESTANDING_CFLAGS not set)
endif
ifeq ($(SYSDEP_OBJS),)
    $(error SYSDEP_OBJS not set)
endif

CC=riscv64-unknown-elf-gcc
CFLAGS=-O2 -std=c99 -Wall -Wno-parentheses -Werror
CFLAGS+=$(FREESTANDING_CFLAGS)

OBJS=ctype.o \
     dtoa.o \
	 float.o \
     memchr.o memcmp.o memcpy.o memmove.o memset.o \
     strcmp.o strlen.o strtol.o strchr.o strchrnul.o strncpy.o stpncpy.o \
     strstr.o \
     stubs.o \
     vfprintf.o vsnprintf.o snprintf.o fprintf.o printf.o

dtoa.o: CFLAGS+=-fno-strict-aliasing

libnolibc.a: $(OBJS) $(SYSDEP_OBJS)
	$(AR) rcs $@ $(OBJS) $(SYSDEP_OBJS)

